---
import HeadCommon from '../components/HeadCommon.astro';
import HeadSEO from '../components/HeadSEO.astro';
import Header from '../components/Header/Header.astro';
import Footer from '../components/Footer/Footer.astro';
import PageContent from '../components/PageContent/PageContent.astro';
import LeftSidebar from '../components/LeftSidebar/LeftSidebar.astro';
import RightSidebar from '../components/RightSidebar/RightSidebar.astro';
import * as CONFIG from '../config';
import '../styles/main.scss';

const { content = {} } = Astro.props;
const currentPage = new URL(Astro.request.url).pathname;
const currentFile = `src/pages${currentPage.replace(/\/$/, '')}.md`;
const githubEditUrl = CONFIG.GITHUB_EDIT_URL && CONFIG.GITHUB_EDIT_URL + currentFile;
---

<html dir={content.dir ?? 'ltr'} lang={content.lang ?? 'en-us'} class="initial">
	<head>
		<HeadCommon />
		<HeadSEO {content} canonicalURL={Astro.canonicalURL} />
		<title>{content.title ? `${content.title} ðŸš€ ${CONFIG.SITE.title}` : CONFIG.SITE.title}</title>
	</head>

	<body class="min-h-screen flex flex-col bg-slate-100">
		<Header {currentPage} />
		<main class="max-w-7xl  mx-auto w-full flex-grow flex">
			<LeftSidebar {currentPage} />
			<div id="grid-main" class="py-4 px-8 flex-grow">
				<PageContent {content} {githubEditUrl}>
					<slot />
				</PageContent>
			</div>
			<!-- <aside id="grid-right" class="grid-sidebar" title="Table of Contents">
				<RightSidebar {content} {githubEditUrl} />
			</aside> -->
		</main>
	</body>
</html>
